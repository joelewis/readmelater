# Migration `20200725195458`

This migration has been generated by Joe B. Lewis at 7/25/2020, 7:54:58 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "Link" (
"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP,
"href" TEXT NOT NULL,
"id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
"notify" BOOLEAN NOT NULL DEFAULT true,
"readingTime" TEXT ,
"timeout" DATE NOT NULL,
"userId" INTEGER NOT NULL,FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE)

CREATE TABLE "Tag" (
"id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
"notify" BOOLEAN NOT NULL DEFAULT true,
"tag" TEXT NOT NULL,
"userId" INTEGER NOT NULL,FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE)

CREATE TABLE "User" (
"createdAt" DATE NOT NULL DEFAULT CURRENT_TIMESTAMP,
"email" TEXT NOT NULL,
"id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
"name" TEXT ,
"notify" BOOLEAN NOT NULL DEFAULT true)

CREATE TABLE "_LinkToTag" (
"A" INTEGER NOT NULL,
"B" INTEGER NOT NULL,FOREIGN KEY ("A") REFERENCES "Link"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("B") REFERENCES "Tag"("id") ON DELETE CASCADE ON UPDATE CASCADE)

CREATE UNIQUE INDEX "Link.userId_href" ON "Link"("userId","href")

CREATE UNIQUE INDEX "Tag.userId_tag" ON "Tag"("userId","tag")

CREATE UNIQUE INDEX "User.email" ON "User"("email")

CREATE UNIQUE INDEX "_LinkToTag_AB_unique" ON "_LinkToTag"("A","B")

CREATE  INDEX "_LinkToTag_B_index" ON "_LinkToTag"("B")

PRAGMA foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200725193850..20200725195458
--- datamodel.dml
+++ datamodel.dml
@@ -2,10 +2,10 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource sqlite {
   provider = "sqlite"
-  url = "***"
-  // url = "***"
+  url = "***"
+  // url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -19,9 +19,9 @@
   readingTime String?
   user      User     @relation(fields: [userId], references: [id])
   userId    Int
   tags      Tag[]    @relation(references: [id])
-  timeout   String?
+  timeout   DateTime
   notify    Boolean  @default(true)
   @@unique([userId, href])
 }
```


